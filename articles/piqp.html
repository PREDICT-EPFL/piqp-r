<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>PIQP Solver Interface ‚Ä¢ piqp</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="‚Äùimage/svg+xml‚Äù" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="PIQP Solver Interface">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">piqp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/piqp.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/PREDICT-EPFL/piqp-r/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>PIQP Solver Interface</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/PREDICT-EPFL/piqp-r/blob/main/vignettes/piqp.Rmd" class="external-link"><code>vignettes/piqp.Rmd</code></a></small>
      <div class="d-none name"><code>piqp.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">1. Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>PIQP solves quadratic programs of the form</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><munder><mo>min</mo><mi>x</mi></munder><mspace width="1.0em"></mspace></mtd><mtd columnalign="left" style="text-align: left"><mfrac><mn>1</mn><mn>2</mn></mfrac><msup><mi>x</mi><mi>‚ä§</mi></msup><mi>P</mi><mi>x</mi><mo>+</mo><msup><mi>c</mi><mi>‚ä§</mi></msup><mi>x</mi></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mtext mathvariant="normal">s.t.</mtext><mspace width="1.0em"></mspace></mtd><mtd columnalign="left" style="text-align: left"><mi>A</mi><mi>x</mi><mo>=</mo><mi>b</mi><mo>,</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"></mtd><mtd columnalign="left" style="text-align: left"><msub><mi>h</mi><mi>l</mi></msub><mo>‚â§</mo><mi>G</mi><mi>x</mi><mo>‚â§</mo><msub><mi>h</mi><mi>u</mi></msub><mo>,</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"></mtd><mtd columnalign="left" style="text-align: left"><msub><mi>x</mi><mi>l</mi></msub><mo>‚â§</mo><mi>x</mi><mo>‚â§</mo><msub><mi>x</mi><mi>u</mi></msub></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
\min_{x} \quad &amp; \frac{1}{2} x^\top P x + c^\top x \\
\text {s.t.}\quad &amp; Ax=b, \\
&amp; h_l \leq Gx \leq h_u, \\
&amp; x_l \leq x \leq x_u
\end{aligned}
</annotation></semantics></math></p>
<p>with primal decision variables
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi><mo>‚àà</mo><msup><mi>‚Ñù</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">x \in \mathbb{R}^n</annotation></semantics></math>,
matrices
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo>‚àà</mo><msubsup><mi>ùïä</mi><mo>+</mo><mi>n</mi></msubsup></mrow><annotation encoding="application/x-tex">P\in
\mathbb{S}_+^n</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>‚àà</mo><msup><mi>‚Ñù</mi><mrow><mi>p</mi><mo>√ó</mo><mi>n</mi></mrow></msup></mrow><annotation encoding="application/x-tex">A \in \mathbb{R}^{p \times n}</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>‚àà</mo><msup><mi>‚Ñù</mi><mrow><mi>m</mi><mo>√ó</mo><mi>n</mi></mrow></msup></mrow><annotation encoding="application/x-tex">G \in \mathbb{R}^{m
\times n}</annotation></semantics></math>, and vectors
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo>‚àà</mo><msup><mi>‚Ñù</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">c \in \mathbb{R}^n</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo>‚àà</mo><msup><mi>‚Ñù</mi><mi>p</mi></msup></mrow><annotation encoding="application/x-tex">b \in \mathbb{R}^p</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>l</mi></msub><mo>‚àà</mo><msup><mi>‚Ñù</mi><mi>m</mi></msup></mrow><annotation encoding="application/x-tex">h_l
\in \mathbb{R}^m</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>u</mi></msub><mo>‚àà</mo><msup><mi>‚Ñù</mi><mi>m</mi></msup></mrow><annotation encoding="application/x-tex">h_u \in \mathbb{R}^m</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>l</mi></msub><mo>‚àà</mo><msup><mi>‚Ñù</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">x_l \in
\mathbb{R}^n</annotation></semantics></math>, and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>u</mi></msub><mo>‚àà</mo><msup><mi>‚Ñù</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">x_u \in \mathbb{R}^n</annotation></semantics></math>.</p>
</div>
<div class="section level2">
<h2 id="the-problem-solver-interface">2. The Problem Solver Interface<a class="anchor" aria-label="anchor" href="#the-problem-solver-interface"></a>
</h2>
<p>Consider:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right" style="text-align: right"><munder><mo>min</mo><mi>x</mi></munder><mspace width="1.0em"></mspace></mtd><mtd columnalign="left" style="text-align: left"><mfrac><mn>1</mn><mn>2</mn></mfrac><msup><mi>x</mi><mi>‚ä§</mi></msup><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>6</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>4</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mi>x</mi><mo>+</mo><msup><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mo>‚àí</mo><mn>1</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mo>‚àí</mo><mn>4</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mi>‚ä§</mi></msup><mi>x</mi></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"><mtext mathvariant="normal">s.t.</mtext><mspace width="1.0em"></mspace></mtd><mtd columnalign="left" style="text-align: left"><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mo>‚àí</mo><mn>2</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mi>x</mi><mo>=</mo><mn>1</mn><mo>,</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"></mtd><mtd columnalign="left" style="text-align: left"><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>1</mn></mtd><mtd columnalign="center" style="text-align: center"><mo>‚àí</mo><mn>1</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>2</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mi>x</mi><mo>‚â§</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>0.2</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mo>‚àí</mo><mn>1</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mo>,</mo></mtd></mtr><mtr><mtd columnalign="right" style="text-align: right"></mtd><mtd columnalign="left" style="text-align: left"><mo>‚àí</mo><mn>1</mn><mo>‚â§</mo><msub><mi>x</mi><mn>1</mn></msub><mo>‚â§</mo><mn>1</mn><mi>.</mi></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
\min_{x} \quad &amp; \frac{1}{2} x^\top \begin{bmatrix} 6 &amp; 0 \\ 0 &amp; 4 \end{bmatrix} x + \begin{bmatrix} -1 \\ -4 \end{bmatrix}^\top x \\
\text {s.t.}\quad &amp; \begin{bmatrix} 1 &amp; -2 \end{bmatrix} x = 1, \\
&amp; \begin{bmatrix} 1 &amp; -1 \\ 2 &amp; 0 \end{bmatrix} x \leq \begin{bmatrix} 0.2 \\ -1 \end{bmatrix}, \\
&amp; -1 \leq x_1 \leq 1.
\end{aligned}
</annotation></semantics></math></p>
<p>The data for this problem can be specified as below.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">P</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">4</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">2</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">G</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">h_u</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">x_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="cn">Inf</span><span class="op">)</span>  <span class="co">## 2 variables</span></span>
<span><span class="va">x_u</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="cn">Inf</span><span class="op">)</span>    <span class="co">## 2 variables</span></span></code></pre></div>
<p>The problem can now be solved via a call to
<code><a href="../reference/solve_piqp.html">solve_piqp()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sol</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve_piqp.html">solve_piqp</a></span><span class="op">(</span><span class="va">P</span>, <span class="va">c</span>, <span class="va">A</span>, <span class="va">b</span>, <span class="va">G</span>, h_u <span class="op">=</span> <span class="va">h_u</span>, x_l <span class="op">=</span> <span class="va">x_l</span>, x_u <span class="op">=</span> <span class="va">x_u</span>, backend <span class="op">=</span> <span class="st">"auto"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"(Solution status, description): = (%d, %s)\n"</span>,</span>
<span>            <span class="va">sol</span><span class="op">$</span><span class="va">status</span>, <span class="va">sol</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">status_desc</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; (Solution status, description): = (1, solved)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Objective: %f, solution: (x1, x2) = (%f, %f)\n"</span>, <span class="va">sol</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">primal_obj</span>, <span class="va">sol</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">sol</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Objective: 6.160000, solution: (x1, x2) = (-0.600000, -0.800000)</span></span></code></pre></div>
<p><code>sol</code> contains many components as <code>str(sol)</code>
will display but the most important ones are:</p>
<ul>
<li>
<code>status</code> : 1 if all goes well (more below),</li>
<li>
<code>x</code> : solution vector</li>
<li>
<code>y</code> : dual solution for the equality constraints</li>
<li>
<code>z_l</code> : dual solution for the lower inequality
constraints</li>
<li>
<code>z_u</code> : dual solution for the upper inequality
constraints</li>
<li>
<code>z_bl</code> : dual solution of lower bound box
constraints</li>
<li>
<code>z_bu</code> : dual solution of upper bound box
constraints</li>
<li>
<code>info$status_desc</code>: a descriptive string of the
status</li>
<li>
<code>info$primal_obj</code> : primal objective value</li>
<li>
<code>info$run_time</code> : total runtime, if asked for in settings
(see below).</li>
</ul>
<p>One can always construct the descriptive string for the status
using:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/status_description.html">status_description</a></span><span class="op">(</span><span class="va">sol</span><span class="op">$</span><span class="va">status</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Solver solved problem up to given tolerance."</span></span></code></pre></div>
<p>Note that PIQP can handle infinite box constraints well, i.e.¬†when
elements of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>x</mi><mi>l</mi></msub><annotation encoding="application/x-tex">x_l</annotation></semantics></math>
or
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>x</mi><mi>u</mi></msub><annotation encoding="application/x-tex">x_u</annotation></semantics></math>
are
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>‚àí</mo><mi>‚àû</mi></mrow><annotation encoding="application/x-tex">-\infty</annotation></semantics></math>
or
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>‚àû</mi><annotation encoding="application/x-tex">\infty</annotation></semantics></math>,
respectively. The inequality constraints now support double-sided bounds
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>l</mi></msub><mo>‚â§</mo><mi>G</mi><mi>x</mi><mo>‚â§</mo><msub><mi>h</mi><mi>u</mi></msub></mrow><annotation encoding="application/x-tex">h_l \leq Gx \leq h_u</annotation></semantics></math>.
For one-sided inequalities
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mi>x</mi><mo>‚â§</mo><mi>h</mi></mrow><annotation encoding="application/x-tex">Gx \leq h</annotation></semantics></math>,
simply pass <code>h_u = h</code> (the default <code>h_l</code> is
<code>-Inf</code>).</p>
</div>
<div class="section level2">
<h2 id="the-solver-model-object">3. The Solver Model Object<a class="anchor" aria-label="anchor" href="#the-solver-model-object"></a>
</h2>
<p>Users who wish to solve QP problems will mostly use the
<code><a href="../reference/solve_piqp.html">solve_piqp()</a></code> function. Behind the scenes,
<code><a href="../reference/solve_piqp.html">solve_piqp()</a></code> creates a solver object and calls methods on
the object to obtain the solution. The solver object can be created
explicitly using <code><a href="../reference/piqp.html">piqp()</a></code> and provides more elaborate
facilities for updating problem data and warm-starting subsequent
solves, which can be very efficient when one is solving a sequence of
related problems.</p>
<p>The above problem could be solved using the solver model object
thus:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/piqp.html">piqp</a></span><span class="op">(</span><span class="va">P</span>, <span class="va">c</span>, <span class="va">A</span>, <span class="va">b</span>, <span class="va">G</span>, h_u <span class="op">=</span> <span class="va">h_u</span>, x_l <span class="op">=</span> <span class="va">x_l</span>, x_u <span class="op">=</span> <span class="va">x_u</span><span class="op">)</span></span>
<span><span class="va">sol2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/solve-methods.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">sol</span>, <span class="va">sol2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>Indeed, this is exactly what <code><a href="../reference/solve_piqp.html">solve_piqp()</a></code> does. The
generic functions <code><a href="https://rdrr.io/pkg/Matrix/man/solve-methods.html" class="external-link">solve()</a></code>, <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code>,
<code><a href="../reference/get_settings.html">get_settings()</a></code>, <code><a href="../reference/get_dims.html">get_dims()</a></code>, and
<code><a href="../reference/update_settings.html">update_settings()</a></code> are available on the model object.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/get_dims.html">get_dims</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt; $n</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $p</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $m</span></span>
<span><span class="co">#&gt; [1] 2</span></span></code></pre></div>
<div class="section level3">
<h3 id="updating-problem-data-and-re-solving">Updating problem data and re-solving<a class="anchor" aria-label="anchor" href="#updating-problem-data-and-re-solving"></a>
</h3>
<p>The real advantage of the model object is the ability to update
problem data and re-solve. When <code><a href="https://rdrr.io/r/stats/update.html" class="external-link">update()</a></code> is called, only
the changed data is passed to the solver, and the solver can warm-start
from the previous solution. This is much more efficient than creating a
new model from scratch each time.</p>
<p>Suppose we want to tighten the inequality bounds and change the
linear cost. We update the model in place and re-solve:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">model</span>, c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">3</span><span class="op">)</span>, h_u <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="op">-</span><span class="fl">1.5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">sol3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/solve-methods.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Status: %s\n"</span>, <span class="va">sol3</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">status_desc</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Status: solved</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Objective: %f, solution: (x1, x2) = (%f, %f)\n"</span>,</span>
<span>            <span class="va">sol3</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">primal_obj</span>, <span class="va">sol3</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">sol3</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Objective: 7.840000, solution: (x1, x2) = (-0.800000, -0.900000)</span></span></code></pre></div>
<p>We can continue updating. Here we relax the variable bounds and
change the equality constraint:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">model</span>, A <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, b <span class="op">=</span> <span class="fl">0</span>,</span>
<span>       x_l <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">2</span><span class="op">)</span>, x_u <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">sol4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/solve-methods.html" class="external-link">solve</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Status: %s\n"</span>, <span class="va">sol4</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">status_desc</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Status: solved</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Objective: %f, solution: (x1, x2) = (%f, %f)\n"</span>,</span>
<span>            <span class="va">sol4</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">primal_obj</span>, <span class="va">sol4</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">sol4</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Objective: 6.562500, solution: (x1, x2) = (-0.750000, -0.750000)</span></span></code></pre></div>
<p>Dimension mismatches are caught:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/update.html" class="external-link">update</a></span><span class="op">(</span><span class="va">model</span>, b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `update.piqp::piqp_model`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Update parameters do not match original problem dimensions</span></span></code></pre></div>
<p>Settings can also be updated between solves:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/update_settings.html">update_settings</a></span><span class="op">(</span><span class="va">model</span>, new_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>verbose <span class="op">=</span> <span class="cn">FALSE</span>, max_iter <span class="op">=</span> <span class="fl">100L</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="dense-and-sparse-interfaces">4. Dense and Sparse Interfaces<a class="anchor" aria-label="anchor" href="#dense-and-sparse-interfaces"></a>
</h2>
<p>PIQP supports dense and sparse problem formulations. For small and
dense problems the dense interface is preferred since vectorized
instructions and cache locality can be exploited more efficiently, but
for sparse problems the sparse interface and result in significant
speedups.</p>
<p>Either interface can be requested explicitly via the
<code>backend</code> parameter which can take on any value among
<code>"dense"</code>, <code>"sparse"</code>, or <code>"auto"</code>, the
default. The last value will automatically switch to a sparse interface
if any of the supplied inputs
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>A</mi><annotation encoding="application/x-tex">A</annotation></semantics></math>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>P</mi><annotation encoding="application/x-tex">P</annotation></semantics></math>,
or
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>G</mi><annotation encoding="application/x-tex">G</annotation></semantics></math>)
is a sparse matrix; otherwise it uses the dense interface.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sparse_sol</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve_piqp.html">solve_piqp</a></span><span class="op">(</span><span class="va">P</span>, <span class="va">c</span>, <span class="va">A</span>, <span class="va">b</span>, <span class="va">G</span>, h_u <span class="op">=</span> <span class="va">h_u</span>, x_l <span class="op">=</span> <span class="va">x_l</span>, x_u <span class="op">=</span> <span class="va">x_u</span>, backend <span class="op">=</span> <span class="st">"sparse"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">sparse_sol</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 12</span></span>
<span><span class="co">#&gt;  $ status: int 1</span></span>
<span><span class="co">#&gt;  $ x     : num [1:2] -0.6 -0.8</span></span>
<span><span class="co">#&gt;  $ y     : num -11.8</span></span>
<span><span class="co">#&gt;  $ z_l   : num [1:2] 0 0</span></span>
<span><span class="co">#&gt;  $ z_u   : num [1:2] 1.64e+01 8.96e-11</span></span>
<span><span class="co">#&gt;  $ z_bl  : num [1:2] 2.18e-10 0.00</span></span>
<span><span class="co">#&gt;  $ z_bu  : num [1:2] 1.55e-12 0.00</span></span>
<span><span class="co">#&gt;  $ s_l   : num [1:2] 1e+30 1e+30</span></span>
<span><span class="co">#&gt;  $ s_u   : num [1:2] 5.67e-12 2.00e-01</span></span>
<span><span class="co">#&gt;  $ s_bl  : num [1:2] 4e-01 1e+30</span></span>
<span><span class="co">#&gt;  $ s_bu  : num [1:2] 1.6 1.0e+30</span></span>
<span><span class="co">#&gt;  $ info  :List of 32</span></span>
<span><span class="co">#&gt;   ..$ status_desc       : chr "solved"</span></span>
<span><span class="co">#&gt;   ..$ iter              : num 7</span></span>
<span><span class="co">#&gt;   ..$ rho               : num 1e-10</span></span>
<span><span class="co">#&gt;   ..$ delta             : num 1e-10</span></span>
<span><span class="co">#&gt;   ..$ mu                : num 5.02e-11</span></span>
<span><span class="co">#&gt;   ..$ sigma             : num 1e-06</span></span>
<span><span class="co">#&gt;   ..$ primal_step       : num 0.99</span></span>
<span><span class="co">#&gt;   ..$ dual_step         : num 0.99</span></span>
<span><span class="co">#&gt;   ..$ primal_res        : num 3.13e-13</span></span>
<span><span class="co">#&gt;   ..$ primal_res_rel    : num 1.96e-13</span></span>
<span><span class="co">#&gt;   ..$ dual_res          : num 1.5e-10</span></span>
<span><span class="co">#&gt;   ..$ dual_res_rel      : num 2.08e-11</span></span>
<span><span class="co">#&gt;   ..$ primal_res_reg    : num 3.13e-11</span></span>
<span><span class="co">#&gt;   ..$ primal_res_reg_rel: num 1.96e-11</span></span>
<span><span class="co">#&gt;   ..$ dual_res_reg      : num 1.5e-08</span></span>
<span><span class="co">#&gt;   ..$ dual_res_reg_rel  : num 2.08e-09</span></span>
<span><span class="co">#&gt;   ..$ primal_prox_inf   : num 0</span></span>
<span><span class="co">#&gt;   ..$ dual_prox_inf     : num 0</span></span>
<span><span class="co">#&gt;   ..$ primal_obj        : num 6.16</span></span>
<span><span class="co">#&gt;   ..$ dual_obj          : num 6.16</span></span>
<span><span class="co">#&gt;   ..$ duality_gap       : num 3.27e-10</span></span>
<span><span class="co">#&gt;   ..$ duality_gap_rel   : num 2.77e-11</span></span>
<span><span class="co">#&gt;   ..$ factor_retires    : num 0</span></span>
<span><span class="co">#&gt;   ..$ reg_limit         : num 1e-10</span></span>
<span><span class="co">#&gt;   ..$ no_primal_update  : num 1</span></span>
<span><span class="co">#&gt;   ..$ no_dual_update    : num 0</span></span>
<span><span class="co">#&gt;   ..$ setup_time        : num 0</span></span>
<span><span class="co">#&gt;   ..$ update_time       : num 0</span></span>
<span><span class="co">#&gt;   ..$ solve_time        : num 0</span></span>
<span><span class="co">#&gt;   ..$ kkt_factor_time   : num 0</span></span>
<span><span class="co">#&gt;   ..$ kkt_solve_time    : num 1479</span></span>
<span><span class="co">#&gt;   ..$ run_time          : num 0</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="another-example">5. Another Example<a class="anchor" aria-label="anchor" href="#another-example"></a>
</h2>
<p>Suppose that we want to solve the following 2-dimensional quadratic
programming problem:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="left" style="text-align: left"><mtext mathvariant="normal">minimize</mtext></mtd><mtd columnalign="left" style="text-align: left"><mn>3</mn><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><mo>+</mo><mn>2</mn><msubsup><mi>x</mi><mn>2</mn><mn>2</mn></msubsup><mo>‚àí</mo><msub><mi>x</mi><mn>1</mn></msub><mo>‚àí</mo><mn>4</mn><msub><mi>x</mi><mn>2</mn></msub></mtd></mtr><mtr><mtd columnalign="left" style="text-align: left"><mtext mathvariant="normal">subject to</mtext></mtd><mtd columnalign="left" style="text-align: left"><mo>‚àí</mo><mn>1</mn><mo>‚â§</mo><mi>x</mi><mo>‚â§</mo><mn>1</mn><mo>,</mo><mspace width="0.222em"></mspace><msub><mi>x</mi><mn>1</mn></msub><mo>=</mo><mn>2</mn><msub><mi>x</mi><mn>2</mn></msub></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{array}{ll} \text{minimize} &amp;  3x_1^2 + 2x_2^2 - x_1 - 4x_2\\
\text{subject to} &amp;  -1 \leq x \leq 1, ~ x_1 = 2x_2
\end{array}
</annotation></semantics></math></p>
<p>Since the solver expects the objective in the form
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mn>2</mn></mfrac><msup><mi>x</mi><mi>‚ä§</mi></msup><mi>P</mi><mi>x</mi><mo>+</mo><msup><mi>c</mi><mi>‚ä§</mi></msup><mi>x</mi></mrow><annotation encoding="application/x-tex">\frac{1}{2}x^\top
P x + c^\top x</annotation></semantics></math>, we define</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo>=</mo><mn>2</mn><mo>‚ãÖ</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mn>3</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mn>0</mn></mtd><mtd columnalign="center" style="text-align: center"><mn>2</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mrow><mspace width="0.333em"></mspace><mtext mathvariant="normal"> and </mtext><mspace width="0.333em"></mspace></mrow><mi>q</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">[</mo><mtable><mtr><mtd columnalign="center" style="text-align: center"><mo>‚àí</mo><mn>1</mn></mtd></mtr><mtr><mtd columnalign="center" style="text-align: center"><mo>‚àí</mo><mn>4</mn></mtd></mtr></mtable><mo stretchy="true" form="postfix">]</mo></mrow><mi>.</mi></mrow><annotation encoding="application/x-tex">
P = 2 \cdot \begin{bmatrix} 3 &amp; 0 \\ 0 &amp; 2\end{bmatrix}
\mbox{ and }
q = \begin{bmatrix} -1 \\ -4\end{bmatrix}.
</annotation></semantics></math></p>
<p>We have one equality constraint and box constraints. This leads to
the following straight-forward formulation.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">P</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">2</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="fl">2</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">2</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span><span class="va">x_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1.0</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">x_u</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1.0</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">sol</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve_piqp.html">solve_piqp</a></span><span class="op">(</span>P <span class="op">=</span> <span class="va">P</span>, c <span class="op">=</span> <span class="va">c</span>, A <span class="op">=</span> <span class="va">A</span>, b <span class="op">=</span> <span class="va">b</span>, x_l <span class="op">=</span> <span class="va">x_l</span>, x_u <span class="op">=</span> <span class="va">x_u</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"(Solution status, description): = (%d, %s)\n"</span>,</span>
<span>            <span class="va">sol</span><span class="op">$</span><span class="va">status</span>, <span class="va">sol</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">status_desc</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; (Solution status, description): = (1, solved)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Objective: %f, solution: (x1, x2) = (%f, %f)\n"</span>, <span class="va">sol</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">primal_obj</span>, <span class="va">sol</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">sol</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Objective: -0.642857, solution: (x1, x2) = (0.428571, 0.214286)</span></span></code></pre></div>
<p>But we can also choose to move the upper box constraints into the
inequalities.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">G</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/diag.html" class="external-link">diag</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">h_u</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">sol</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve_piqp.html">solve_piqp</a></span><span class="op">(</span>P <span class="op">=</span> <span class="va">P</span>, c <span class="op">=</span> <span class="va">c</span>, A <span class="op">=</span> <span class="va">A</span>, b <span class="op">=</span> <span class="va">b</span>, G <span class="op">=</span> <span class="va">G</span>, h_u <span class="op">=</span> <span class="va">h_u</span>,</span>
<span>                  x_l <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>, x_u <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">Inf</span>, <span class="cn">Inf</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"(Solution status, description): = (%d, %s)\n"</span>,</span>
<span>            <span class="va">sol</span><span class="op">$</span><span class="va">status</span>, <span class="va">sol</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">status_desc</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; (Solution status, description): = (1, solved)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Objective: %f, solution: (x1, x2) = (%f, %f)\n"</span>, <span class="va">sol</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">primal_obj</span>, <span class="va">sol</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">sol</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Objective: -0.642857, solution: (x1, x2) = (0.428571, 0.214286)</span></span></code></pre></div>
<p>Or we can move both of them into the inequalities.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">G</span> <span class="op">&lt;-</span> <span class="fu">Matrix</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/Matrix/man/Matrix.html" class="external-link">Matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="op">-</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span>, byrow <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                    nrow <span class="op">=</span> <span class="fl">4</span>, sparse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">h_u</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sol</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve_piqp.html">solve_piqp</a></span><span class="op">(</span>A <span class="op">=</span> <span class="va">A</span>, b <span class="op">=</span> <span class="va">b</span>, c <span class="op">=</span> <span class="va">c</span>, P <span class="op">=</span> <span class="va">P</span>, G <span class="op">=</span> <span class="va">G</span>, h_u <span class="op">=</span> <span class="va">h_u</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"(Solution status, description): = (%d, %s)\n"</span>,</span>
<span>            <span class="va">sol</span><span class="op">$</span><span class="va">status</span>, <span class="fu"><a href="../reference/status_description.html">status_description</a></span><span class="op">(</span><span class="va">sol</span><span class="op">$</span><span class="va">status</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; (Solution status, description): = (1, Solver solved problem up to given tolerance.)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Objective: %f, solution: (x1, x2) = (%f, %f)\n"</span>, <span class="va">sol</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">primal_obj</span>, <span class="va">sol</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">sol</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Objective: -0.642857, solution: (x1, x2) = (0.428571, 0.214286)</span></span></code></pre></div>
<p>All of them will yield the same result.</p>
</div>
<div class="section level2">
<h2 id="solver-parameters">6. Solver parameters<a class="anchor" aria-label="anchor" href="#solver-parameters"></a>
</h2>
<p>PIQP has a number of parameters that control its behavior, including
verbosity, tolerances, etc.; see help on <code><a href="../reference/piqp_settings.html">piqp_settings()</a></code>.
As an example, in the last problem, we can reduce the number of
iterations.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/solve_piqp.html">solve_piqp</a></span><span class="op">(</span>P <span class="op">=</span> <span class="va">P</span>, c <span class="op">=</span> <span class="va">c</span>, A <span class="op">=</span> <span class="va">A</span>, b <span class="op">=</span> <span class="va">b</span>, G <span class="op">=</span> <span class="va">G</span>, h_u <span class="op">=</span> <span class="va">h_u</span>,</span>
<span>          settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>max_iter <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">)</span> <span class="co">## Reduced number of iterations</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"(Solution status, description): = (%d, %s)\n"</span>,</span>
<span>            <span class="va">s</span><span class="op">$</span><span class="va">status</span>, <span class="va">s</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">status_desc</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; (Solution status, description): = (-1, max iterations reached)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"Objective: %f, solution: (x1, x2) = (%f, %f)\n"</span>, <span class="va">s</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="va">primal_obj</span>, <span class="va">s</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">s</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Objective: -0.642857, solution: (x1, x2) = (0.428564, 0.214282)</span></span></code></pre></div>
<p>Note the different status, which should always be checked in
code.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://naras.su.domains/" class="external-link">Balasubramanian Narasimhan</a>, <a href="https://people.epfl.ch/roland.schwan" class="external-link">Roland Schwan</a>, <a href="https://people.epfl.ch/yuning.jiang" class="external-link">Yuning Jiang</a>, <a href="https://people.epfl.ch/daniel.kuhn" class="external-link">Daniel Kuhn</a>, <a href="https://people.epfl.ch/colin.jones" class="external-link">Colin N. Jones</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
